{"version":3,"file":"mat-input-autosize.umd.js","sources":["../../../projects/mat-input-autosize/src/lib/mat-input-autosize.directive.ts","../../../projects/mat-input-autosize/src/lib/mat-input-autosize.module.ts","../../../projects/mat-input-autosize/src/public-api.ts","../../../projects/mat-input-autosize/src/mat-input-autosize.ts"],"sourcesContent":["import {\n    AfterViewInit,\n    Directive,\n    ElementRef,\n    Input,\n    OnDestroy,\n    Optional,\n    Self\n} from '@angular/core';\nimport {NgModel} from '@angular/forms';\nimport {MatInput} from '@angular/material/input';\nimport {Subscription} from 'rxjs';\n\n@Directive({\n    selector: '[matInputAutosize]'\n})\nexport class MatInputAutosizeDirective implements AfterViewInit, OnDestroy {\n    inputElement: HTMLInputElement;\n    hiddenText: Text;\n    changeDetectSub: Subscription;\n\n    @Input() matInputAutosizeMaxWidth;\n    @Input() matInputAutosizeMinWidth = '120px';\n    @Input() matInputAutosizeFontStyle;\n\n    constructor(el: ElementRef<HTMLInputElement>,\n                @Self() private childMatInput: MatInput,\n                @Optional() @Self() private childNgModel: NgModel) {\n        this.inputElement = el.nativeElement;\n    }\n\n    ngAfterViewInit(): void {\n        this.checkErrors();\n        this.overwriteParentWidth();\n        this.createHiddenTextContainer();\n        this.setOwnStyles();\n        this.subscribeToChanges();\n    }\n\n    ngOnDestroy(): void {\n        if (this.changeDetectSub) {\n            this.changeDetectSub.unsubscribe();\n        }\n    }\n\n    checkErrors(): void {\n        if (!(this.inputElement instanceof HTMLInputElement)) {\n            throw new Error('matInputAutosize directive must be on an input element');\n        }\n\n        if (!this.childMatInput) {\n            throw new Error('Element with matInputAutosize directive must also have the matInput directive');\n        }\n    }\n\n    overwriteParentWidth(): void {\n        Object.assign((this.inputElement.parentNode as HTMLElement).style, {width: '100%'});\n    }\n\n    createHiddenTextContainer(): void {\n        const textContainer = document.createElement('div');\n        Object.assign(textContainer.style, {\n            display: 'inline-block',\n            'max-width': this.matInputAutosizeMaxWidth || null,\n            'min-width': this.matInputAutosizeMinWidth,\n            font: this.matInputAutosizeFontStyle || null,\n            visibility: 'hidden',\n            'white-space': 'pre'\n        });\n        this.inputElement.parentNode.appendChild(textContainer);\n\n        this.hiddenText = document.createTextNode(' ');\n        textContainer.appendChild(this.hiddenText);\n    }\n\n    setOwnStyles(): void {\n        Object.assign(this.inputElement.style, {\n            position: 'absolute',\n            left: '0'\n        });\n    }\n\n    subscribeToChanges(): void {\n        if (this.childNgModel) {\n            this.changeDetectSub = this.childNgModel.control.valueChanges.subscribe(this.changeHiddenText);\n        } else {\n            this.inputElement.addEventListener('input', () => this.changeHiddenText(this.inputElement.value));\n        }\n    }\n\n    changeHiddenText = (newValue: string): void => {\n        if (this.hiddenText) {\n            this.hiddenText.data = newValue + ' ';\n        }\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { MatInputAutosizeDirective } from './mat-input-autosize.directive';\n\n@NgModule({\n  declarations: [MatInputAutosizeDirective],\n  imports: [\n  ],\n  exports: [MatInputAutosizeDirective]\n})\nexport class MatInputAutosizeModule { }\n","/*\n * Public API Surface of mat-input-autosize\n */\n\nexport * from './lib/mat-input-autosize.directive';\nexport * from './lib/mat-input-autosize.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["Directive","ElementRef","MatInput","Self","NgModel","Optional","Input","NgModule"],"mappings":"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"}